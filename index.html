<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Roblox Name Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0b0b;
      --panel:#0f0f10;
      --muted:#9aa1a6;
      --accent:#ffffff;
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(255,255,255,0.03), transparent),
                  radial-gradient(800px 400px at 90% 90%, rgba(255,255,255,0.02), transparent),
                  var(--bg);
      color:var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    .wrap{min-height:100vh;display:grid;place-items:center;padding:28px}

    .card{width:100%;max-width:980px;border-radius:16px;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);box-shadow:0 14px 40px rgba(0,0,0,0.6)}

    header{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .title{display:flex;flex-direction:column}
    h1{margin:0;font-weight:700;font-size:20px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

    .controls{display:flex;gap:10px}
    .btn{appearance:none;border:0;padding:10px 12px;border-radius:10px;background:transparent;color:var(--accent);cursor:pointer;font-weight:600;border:1px solid rgba(255,255,255,0.06);backdrop-filter:blur(6px)}
    .btn.primary{background:linear-gradient(90deg,rgba(255,255,255,0.03),rgba(255,255,255,0.02));box-shadow:0 6px 18px rgba(0,0,0,0.45)}

    .tabs{display:flex;gap:8px;margin-top:18px}
    .tab{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer}
    .tab.active{background:rgba(255,255,255,0.02)}

    main{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:18px}
    .panel{padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.012), transparent);border:1px solid rgba(255,255,255,0.02)}

    .output{width:100%;padding:14px;border-radius:10px;background:rgba(255,255,255,0.02);font-family:monospace;font-weight:700;font-size:16px;display:flex;align-items:center;justify-content:space-between}
    .small{font-size:12px;color:var(--muted)}

    .side{display:flex;flex-direction:column;gap:12px}

    footer{margin-top:14px;color:var(--muted);font-size:12px}

    .modal{position:fixed;left:0;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:9999}
    .modal-card{width:380px;padding:18px;border-radius:12px;background:linear-gradient(180deg,#0e0e0e,#0b0b0b);border:1px solid rgba(255,255,255,0.03)}
    .field{display:flex;flex-direction:column;margin-top:10px}
    input[type=text],input[type=password]{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--accent);outline:none}

    .history{white-space:pre-wrap;font-family:monospace;background:rgba(255,255,255,0.01);padding:12px;border-radius:8px;max-height:420px;overflow:auto;border:1px solid rgba(255,255,255,0.02)}

    .cursor-glow{position:fixed;left:0;top:0;width:36px;height:36px;border-radius:50%;pointer-events:none;mix-blend-mode:screen;transform:translate(-50%,-50%);transition:width .12s,height .12s,opacity .12s}

    @media (max-width:920px){main{grid-template-columns:1fr}.side{order:2}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app">
      <header>
        <div class="title">
          <h1>Roblox Name Generator</h1>
          <p class="lead">Simple generator + history. Login required to save and view your generated entries.</p>
        </div>
        <div class="controls" id="authControls">
          <div class="small" id="loggedAs">—</div>
          <button class="btn" id="openLogin">Login / Register</button>
        </div>
      </header>

      <div class="tabs" role="tablist">
        <div class="tab active" data-tab="generator">Generator</div>
        <div class="tab" data-tab="history">History</div>
      </div>

      <main>
        <section class="panel" id="generatorPanel">
          <div style="margin-bottom:10px"><div class="small">Usuário</div>
            <div class="output" id="usernameOutput">—</div></div>

          <div style="margin-bottom:10px"><div class="small">Senha</div>
            <div class="output" id="passwordOutput">—</div></div>

          <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
            <button class="btn primary" id="generateBtn">Gerar</button>
            <button class="btn" id="saveBtn">Salvar na minha conta</button>
            <button class="btn" id="randomizeBtn">Randomize Seed</button>
          </div>

          <div class="small" style="margin-top:12px">Ao salvar, a entrada ficará disponível na aba <strong>History</strong> e mostrada neste formato:</div>
          <div class="small monospace" style="margin-top:8px">nome:senha<br>--------------<br>nome:senha<br>--------------</div>

          <div class="note" style="margin-top:12px;color:var(--muted)">Nomes gerados são simples e em inglês. Este sistema de login é local (localStorage) — não use credenciais sensíveis.</div>
        </section>

        <aside class="side">
          <div class="panel">
            <h3>Configurações</h3>
            <div style="margin-top:8px" class="small">Include digits in username <input type="checkbox" id="allowDigits" checked></div>
            <div style="margin-top:6px" class="small">Upper &amp; lower mix <input type="checkbox" id="mixCase" checked></div>
            <div style="margin-top:8px" class="small">Password format: <strong>3 words</strong> + <strong>6 chars</strong>.</div>
          </div>

          <div class="panel">
            <h3>Seed</h3>
            <div class="small" id="seedDisplay">seed: —</div>
            <div style="margin-top:8px"><button class="btn" id="copySeed">Copiar Seed</button></div>
          </div>

          <div class="panel" id="historyQuick">
            <h3>Últimas (rápido)</h3>
            <div id="lastQuick" class="small">—</div>
          </div>
        </aside>
      </main>

      <div id="historyPanel" style="display:none;margin-top:14px">
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3>History</h3>
            <div style="display:flex;gap:8px">
              <button class="btn" id="exportBtn">Export</button>
              <button class="btn" id="clearBtn">Clear</button>
            </div>
          </div>

          <div class="history" id="historyContent">(No entries yet)</div>
        </div>
      </div>

      <footer>Feito com atenção — login local + histórico salvo no seu navegador.</footer>
    </div>
  </div>

  <div class="cursor-glow" id="cursor"></div>

  <div id="loginModal" class="modal" style="display:none">
    <div class="modal-card">
      <h3 id="modalTitle">Login / Register</h3>
      <div class="field"><label class="small">Usuário</label><input type="text" id="authUser" placeholder="username"></div>
      <div class="field"><label class="small">Senha</label><input type="password" id="authPass" placeholder="password"></div>
      <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
        <button class="btn" id="closeModal">Cancelar</button>
        <button class="btn primary" id="doLogin">Login</button>
        <button class="btn" id="doRegister">Registrar</button>
      </div>
      <div class="small" style="margin-top:10px;color:var(--muted)">Aviso: credenciais ficam localmente no seu navegador (localStorage). Não utilize senhas reais.</div>
    </div>
  </div>

  <script>
    function nowText(){ return new Date().toLocaleString(); }
    function saveUsers(users){ localStorage.setItem('rbg_users', JSON.stringify(users)); }
    function loadUsers(){ return JSON.parse(localStorage.getItem('rbg_users')||'{}'); }

    async function hashStr(str){
      if(window.crypto && crypto.subtle){
        const buf = new TextEncoder().encode(str);
        const hash = await crypto.subtle.digest('SHA-256', buf);
        return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
      }
      return str;
    }

    let currentUser = localStorage.getItem('rbg_currentUser') || null;
    const loggedAsEl = document.getElementById('loggedAs');
    const openLogin = document.getElementById('openLogin');
    const loginModal = document.getElementById('loginModal');
    const authUser = document.getElementById('authUser');
    const authPass = document.getElementById('authPass');
    const doLogin = document.getElementById('doLogin');
    const doRegister = document.getElementById('doRegister');
    const closeModal = document.getElementById('closeModal');

    function updateAuthDisplay(){
      if(currentUser){
        loggedAsEl.innerText = 'Logged: ' + currentUser;
        openLogin.innerText = 'Logout';
      } else { loggedAsEl.innerText = 'Not logged'; openLogin.innerText = 'Login / Register'; }
    }
    updateAuthDisplay();

    openLogin.addEventListener('click', ()=>{
      if(currentUser){
        currentUser = null; localStorage.removeItem('rbg_currentUser'); updateAuthDisplay(); flashText('Logged out'); renderHistory();
      } else { loginModal.style.display='flex'; authUser.value=''; authPass.value=''; }
    });

    closeModal.addEventListener('click', ()=>{ loginModal.style.display='none'; });

    doRegister.addEventListener('click', async ()=>{
      const user = authUser.value.trim(); const pass = authPass.value;
      if(!user || !pass){ alert('Enter username and password'); return; }
      const users = loadUsers();
      if(users[user]){ alert('User exists'); return; }
      users[user] = await hashStr(pass);
      saveUsers(users);
      flashText('Registered — you can now login');
    });

    doLogin.addEventListener('click', async ()=>{
      const user = authUser.value.trim(); const pass = authPass.value;
      if(!user || !pass){ alert('Enter username and password'); return; }
      const users = loadUsers();
      const hashed = await hashStr(pass);
      if(users[user] && users[user] === hashed){ currentUser = user; localStorage.setItem('rbg_currentUser', user); flashText('Logged in as '+user); loginModal.style.display='none'; updateAuthDisplay(); renderHistory(); }
      else alert('Invalid credentials');
    });

    const WORDS = ["sun","river","night","sky","stone","leaf","echo","wind","flame","ice","storm","void","lucky","iron","amber","orbit","nova","pixel","quiet","shadow","silent","breeze","mist","sage","dawn"];
    let seed = Date.now(); function setSeed(s){ seed = s; const el = document.getElementById('seedDisplay'); if(el) el.innerText = 'seed: '+seed }
    setSeed(seed);
    function xorshift32(s){ let x = s>>>0; return function(){ x ^= x << 13; x >>>= 0; x ^= x >>> 17; x >>>= 0; x ^= x << 5; x >>>= 0; return (x>>>0)/4294967296; }}
    let rng = xorshift32(seed);
    function reseed(){ seed = Math.floor(Date.now() + Math.random()*9999); rng = xorshift32(seed); setSeed(seed) }

    function usernameGenerator(){
      const allowDigits = document.getElementById('allowDigits')?.checked ?? true;
      const mixCase = document.getElementById('mixCase')?.checked ?? true;
      const chance = rng(); let username='';
      if(allowDigits && chance < 0.10){
        for(let i=0;i<3;i++){ let c = String.fromCharCode(97 + Math.floor(rng()*26)); if(mixCase && rng()>0.5) c=c.toUpperCase(); username+=c }
        for(let i=0;i<3;i++) username+=String.fromCharCode(48 + Math.floor(rng()*10));
      } else {
        for(let i=0;i<6;i++){ let c = String.fromCharCode(97 + Math.floor(rng()*26)); if(mixCase && rng()>0.5) c=c.toUpperCase(); username+=c }
      }
      return username.replace(/[^A-Za-z0-9]/g,'A');
    }

    function passwordGenerator(){
      let used = new Set(); let words = [];
      for(let i=0;i<3;i++){
        let w;
        for(let t=0;t<10;t++){
          w = WORDS[Math.floor(rng()*WORDS.length)]; if(!used.has(w)) break;
        }
        used.add(w);
        if(rng()>0.5) w = w.toUpperCase(); else w = w.toLowerCase();
        words.push(w);
      }
      let suffixChars = '0123456789!@#$%&*'; let suffix = '';
      for(let i=0;i<6;i++) suffix += suffixChars[Math.floor(rng()*suffixChars.length)];
      return words.join('') + suffix;
    }

    const usernameOutput = document.getElementById('usernameOutput');
    const passwordOutput = document.getElementById('passwordOutput');
    const genBtn = document.getElementById('generateBtn');
    const randBtn = document.getElementById('randomizeBtn');
    if(genBtn) genBtn.addEventListener('click', ()=>{ generateAll(); });
    if(randBtn) randBtn.addEventListener('click', ()=>{ reseed(); generateAll(); });

    function generateAll(){
      const u = usernameGenerator();
      const p = passwordGenerator();
